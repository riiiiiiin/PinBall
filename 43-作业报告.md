# PinBall-作业报告

##### Jaeger: 毛奕澄 周启轩 范佳俊

###### 2023程序设计实习 43组项目

## 程序功能介绍
+ 本程序是对Windows XP系统自带的游戏之一 _三维弹球_ 的模仿,除大部分复现了 _三维弹球_ 的游戏性之外,还加入了开场动画,地图编辑器,以及自定义游戏材质的功能.

#### 开场动画
+ 开场动画模仿 _Star Wars_ 系列的开场动画
+ 旨在阐述游戏的背景故事,这里提到的许多功能,都在项目中得以实现
+ 开场动画在程序开始运行时自动开始播放,鼠标左键单击可以跳过.播放完毕或者跳过后,将会进入游戏,并自动开始播放游戏音乐
  
#### 游戏界面
游戏界面分为左,右两个半区.左侧半区为游戏,右侧半区展示分数以及功能按键
+ 游戏的地图设计主要参考 _三维弹球_ ,地图元素包括球,弹力鼓,奖励点,三角形弹力鼓,轨道,四边形弹力鼓,以及玩家可控制的活版
+ 游戏过程中,球将会在地图中上下弹跳,根据击中的地图元素不同,将会得到不同的分数
+ 玩家可以按下 **Z** 按键,来控制左侧活版击球, **M** 按键来控制右侧活版击球(注意:可能需要鼠标点击游戏窗口,让窗口获得焦点后,才能进行键盘控制)
+ 若球从两活版中间逃离地图,将视为游戏结束,会弹出游戏结束对话框,提示当前分数,玩家此时可选择再来一场,或者退出游戏
- 右侧半区的上半部分,分别展示当前分数(上),以及最高分数(下)
- 右下角有两个按键,分别为**Edit**和**Menu**
- 点击 **Edit** 按键,将会弹出对话框并暂停游戏,点击 **YES** 切换到地图编辑器,点击**NO**返回游戏并继续
- 点击**Menu**按键,或者在游戏中按下**ESC**,将会弹出暂停菜单并暂停游戏,暂停菜单包括静音背景音乐,静音游戏音效,开始新游戏,返回游戏和退出游戏
- 静音按键为状态按键,右侧图标显示为*X*表示已经静音,显示为"□"表示未静音
- 点击开始新游戏,将会返回游戏界面,并开始一局新游戏
- 点击返回游戏,将会返回游戏界面,并继续正在进行的游戏
- 点击退出游戏,将会弹出对话框,点击**YES**退出程序,点击**NO**返回暂停菜单

#### 地图编辑器
玩家通过在游戏界面,点击**Edit**并确认来进入地图编辑器  
地图编辑器同样分为左右两个半区,左半区展示已经加入地图的元素,右半区展示可加入的地图元素,以及功能按键
+ 右半区上半部分展示四种可加入到地图中的"动态"地图元素:三角形弹力鼓(右),奖励点,三角形弹力鼓(左),弹力鼓.可以通过按下鼠标左键将它们拖拽到左侧的地图上来将他们加入到地图上.
+ 地图元素不允许相互重叠,也不允许放在地图外,同时不允许放置在地图中心发球处.如果放置位置合适,地图元素将显示为半透明,若不合适,将会额外有红色滤镜
+ 在允许放置的情况下,松开鼠标左键,元素被放置在地图上,不允许放置的情况下,松开鼠标左键,元素将被回收.
+ 已经放置的地图元素,可以再次拖动.若想要移除元素,可以直接拖拽到地图外,也可以在按下左Ctrl的同时,鼠标左键点击来移除
- 右半区中部,展示当前主题(材质)的缩略图与标题,点击缩略图两侧的左右按键,可以切换主题,关于如何安装或制作主题,请见
- 右半区下部有**Play**和**Menu**两个按键
- 按下**Menu**按键,将进入菜单.菜单除了包括静音,返回,退出以外,还包括重力调节,重设地图
- 重力调节为滑动条,可以通过滑动来控制重力大小,允许范围为默认值的50%到300%
- 重设地图为单击按钮,按下重设地图将会将已经放置的元素清空,并将重力还原为100%
- 按下**Play**按键,将弹出对话框,点击**NO**返回地图编辑器,点击**YES**切换到游戏,并在地图编辑器中设计的新地图上开始新游戏.如果此前地图编辑器上没有加入任何"动态"元素,将会在默认地图上开始游戏,然而重力的设置始终有效.

#### 自定义游戏材质
本游戏支持自定义材质包(主题包,Themepack)
+ 自定义材质包不需要重新编译源代码,只需要按要求放置后,重新启动游戏,即可在地图编辑器处启用新的材质包
+ 作为示例,[源代码分支](https://github.com/riiiiiiin/PinBall/tree/code)中另外提供由我们自己设计的额外材质包
- 要安装材质包,请将Themepacks文件夹,包括里面的文件,全部放置在编译完成后的**可执行文件**所在的目录下
- 要自己制作材质包,需要自行在Themepacks下建立材质包文件夹,提供材质文件,并按照要求填写theme.json中的所有要求的字段,具体的字段要求,以及它们与地图元素的对应关系,请参照 来了解更多

## 设计细节
程序的结构树,请参阅[源代码分支](https://github.com/riiiiiiin/PinBall/blob/code/README.md),这里介绍主要类的设计细节

## 分工情况

## 项目总结与反思